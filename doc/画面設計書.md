# AIクイズアプリ 画面設計書

このドキュメントは、AIクイズアプリの画面構成、画面遷移、および各画面のレイアウト（ワイヤーフレーム）を定義する。

## 1. 画面一覧

本アプリケーションで必要な画面は以下の通りである。

0. [画面0] ゲーム選択画面 (Game Selection)
1. [画面1] プレイヤー登録画面 (Player Setup)
2. [画面2] クイズ設定画面 (Game Setup)
3. [画面3] クイズプレイ画面 (Quiz Play)

## 2. 画面遷移図

ユーザーの操作による画面の基本的な流れは以下の通り。

```
(スタート)
    |
    v
[画面0: ゲーム選択画面]
    |
    (「クイズゲーム」押下)
    |
    v
[画面1: プレイヤー登録画面]
    |
    (プレイヤーを1人以上登録し、「設定へ進む」押下)
    |
    v
[画面2: クイズ設定画面]
    |
    (ジャンルと難易度を選択し、「クイズ開始」押下)
    |
    v
[画面3: クイズプレイ画面]
```

**[画面3] クイズプレイ画面からの遷移:**

- **「設定に戻る」押下**: [画面2] クイズ設定画面に戻る。プレイヤー情報は維持されるが、クイズのジャンルや難易度はリセットされる。
- **「ゲームをリセット」押下**: [画面1] プレイヤー登録画面に戻る。すべてのプレイヤー情報とスコアがリセットされる。
- **「ユーザーを追加する」押下**: [画面1] プレイヤー登録画面に戻る。**現在のプレイヤー情報とスコアを維持したまま**、新しいユーザーを追加できる。追加後、再度 [画面2] を経由してゲームに戻る。

## 3. ワイヤーフレーム (各画面のレイアウト案)

### [画面0] ゲーム選択画面

- 目的: プレイするゲームを選択する。
- 主要コンポーネント:
    - ヘッダー:
        - バージョン情報 (例: Ver 1.1.0)
        - 更新履歴リンク
    - タイトル: ゲーム選択
    - ゲーム選択ボタン:
        - [クイズゲーム] (現在実装中)
        - [なぞなぞゲーム] (将来実装予定)
        - [ウミガメのスープ] (将来実装予定)
    - 更新履歴モーダル (「更新履歴」リンククリックで表示)
        - タイトル: 更新履歴
        - 履歴リスト:
            - Ver 1.1.0 (2025-11-24): バージョン表示機能、更新履歴表示機能を追加
            - Ver 1.0.0 (2025-11-20): 初回リリース
        - [閉じる] ボタン
- レイアウト図 (アスキーアート):
```
+------------------------------------------------------+
| Ver 1.1.0                     [更新履歴を表示]         |
+======================================================+
|                                                      |
|   どのゲームで遊びますか？                           |
|                                                      |
|   +------------------+                               |
|   |   クイズゲーム   |                               |
|   +------------------+                               |
|                                                      |
|   +------------------+                               |
|   | なぞなぞゲーム   |                               |
|   | (準備中)         |                               |
|   +------------------+                               |
|                                                      |
|   +------------------+                               |
|   | ウミガメのスープ |                               |
|   | (準備中)         |                               |
|   +------------------+                               |
|                                                      |
+------------------------------------------------------+
```
- 更新履歴モーダル レイアウト図 (アスキーアート):
```
+------------------------------------------------------+
|                                                      |
|            +-------------------------------+         |
|            | 更新履歴                [×]  |         |
|            +===============================+         |
|            |                               |         |
|            | **Ver 1.1.0 (2025-11-24)**    |         |
|            | - バージョン表示機能を追加  |         |
|            | - 更新履歴モーダルを追加    |         |
|            |                               |         |
|            | **Ver 1.0.0 (2025-11-20)**    |         |
|            | - 初回リリース                |         |
|            |                               |         |
|            |               [ 閉じる ]      |         |
|            +-------------------------------+         |
|                                                      |
+------------------------------------------------------+
```


### [画面1] プレイヤー登録画面

- 目的: 1〜16人のプレイヤーを登録する。

- 主要コンポーネント:

    - タイトル: プレイヤー登録

    - プレイヤー入力欄 (動的):

        - テキスト入力: プレイヤー名 (例: 田中)

        - アイコン選択 (任意): 👤 (クリックでアイコンピッカー表示)

        - [削除] ボタン (プレイヤーをリストから削除)

    - [＋ プレイヤーを追加] ボタン (最大16人まで)

    - [設定へ進む] ボタン (プレイヤーが1人以上の場合に有効化)
    
    - [← ゲーム選択に戻る] ボタン

- レイアウト図 (アスキーアート):

```
+------------------------------------------------------+
| プレイヤー登録                                       |
+======================================================+
|                                                      |
|  [👤 田中太郎] [削除]                                  |
|  [🤖 鈴木一郎] [削除]                                  |
|                                                      |
|  [＋ プレイヤーを追加]                                   |
|                                                      |
|                                                      |
+------------------------------------------------------+
| [← ゲーム選択に戻る]      [設定へ進む (2/16)]        |
+------------------------------------------------------+
```

### [画面2] クイズ設定画面

- 目的: 出題するクイズのジャンル、難易度、**ゲームモード**を選択する。

- 主要コンポーネント:

    - タイトル: クイズ設定

    - **ゲームモード選択 (単一選択):**
        - **[全員回答モード] (デフォルト)**
        - **[ターン制モード]**

    - ジャンル選択 (単一選択):
        - **一般ジャンル**: [歴史] [化学] [地理] [映画] [アニメ]
        - **ITスキル**: [プログラミング] [Java] [C#] [Python] [SQL]
        - **ランダム**: [ランダム]

    - 難易度選択 (単一選択):

        - [かんたん] [ふつう] [むずかしい]

    - [クイズ開始] ボタン (すべての設定が選択されたら有効化)

    - [← プレイヤー登録に戻る] ボタン

- レイアウト図 (アスキーアート):

```
+------------------------------------------------------+
| クイズ設定                                           |
+======================================================+
| ゲームモード:                                        |
|  [◎ 全員回答モード] [〇 ターン制モード]             |
|                                                      |
| ジャンル:                                            |
|   一般ジャンル:                                      |
|     [歴史] [化学] [地理] [映画] [アニメ]             |
|                                                      |
|   ITスキル:                                          |
|     [プログラミング] [Java] [C#] [Python] [SQL]      |
|                                                      |
|   ランダム:                                          |
|     [ランダム]                                       |
|                                                      |
| 難易度:                                              |
|  [かんたん] [ふつう] [むずかしい]                    |
|                                                      |
+------------------------------------------------------+
| [← プレイヤー登録に戻る] [クイズ開始]                |
+------------------------------------------------------+
```

### [画面3] クイズプレイ画面

- 目的: AIが出題するクイズをプレイし、スコアを管理する。

- **ターン制モード時の追加仕様:**
    - **ターン表示**: 画面の目立つ位置（例: クイズエリアの上部）に、「次は **田中さん** の番です」といったテキストを大きく表示する。
    - **回答者ハイライト**: 画面下部のプレイヤースコアエリアで、現在の回答者（例: 田中さん）の表示を目立たせる（例: アイコンを大きくする、背景色を変える）。
    - **スコアボタンの無効化**: ターン制モードでは、スコアは自動加算されるため、[+] [-] ボタンは非表示または無効化する。

- レイアウト: 画面は大きく3つのエリアに分かれる。

    - [A] ヘッダーエリア (上部)

    - [B] クイズエリア (中央)

    - [C] プレイヤースコアエリア (下部/フッター)

-   レイアウト図 (アスキーアート) - (B-2) 回答受付中 **(ターン制モードの場合)**:

```
+------------------------------------------------------+
| [A] ヘッダーエリア                                   |
|   ジャンル: Java / 難易度: ふつう  [ユーザーを追加する] [設定に戻る] [ゲームをリセット] |
+======================================================+
| [B] クイズエリア (回答受付中)                        |
|                                                      |
|   次は 田中さん の番です                             |
|   -------------------------------------------------- |
|   Q. Javaでインターフェースの主な目的は何ですか？    |
|                                                      |
|   [A: クラスのインスタンスを生成するため]            |
|   [B: 関連するメソッドのシグネチャ（型）を...]       |
|   [C: クラスのプライベートなメンバーに...]           |
|   [D: コードの実行速度を向上させるため]              |
|                                                      |
|   [ヒントを見る]                                     |
|                                                      |
+------------------------------------------------------+
| [C] プレイヤースコアエリア (フッター)                |
|   [ 0 👤田中 ](強調)  [ 2 🤖鈴木 ]  [ 1 🦊佐藤 ]     |
+------------------------------------------------------+
```

-   レイアウト図 (アスキーアート) - (B-2) 回答受付中:

```
+------------------------------------------------------+
| [A] ヘッダーエリア                                   |
|   ジャンル: Java / 難易度: ふつう  [ユーザーを追加する] [設定に戻る] [ゲームをリセット] |
+======================================================+
| [B] クイズエリア (回答受付中)                        |
|                                                      |
|   Q. Javaでインターフェースの主な目的は何ですか？    |
|                                                      |
|   [A: クラスのインスタンスを生成するため]            |
|   [B: 関連するメソッドのシグネチャ（型）を...]       |
|   [C: クラスのプライベートなメンバーに...]           |
|   [D: コードの実行速度を向上させるため]              |
|                                                      |
|   [ヒントを見る]                                     |
|                                                      |
+------------------------------------------------------+
| [C] プレイヤースコアエリア (フッター)                |
|   [+][-] 0 👤田中  [+][-] 2 🤖鈴木  [+][-] 1 🦊佐藤   |
+------------------------------------------------------+
```

- レイアウト図 (アスキーアート) - (B-3) 回答・解説表示時:

```
+------------------------------------------------------+
| [A] ヘッダーエリア                                   |
|   ジャンル: Java / 難易度: ふつう  [ユーザーを追加する] [設定に戻る] [ゲームをリセット] |
+======================================================+
| [B] クイズエリア (解説表示)                          |
|                                                      |
|   Q. Javaでインターフェースの主な目的は何ですか？    |
|                                                      |
|   [A: ...] (不正解)                                  |
|   [B: ...] (正解！ 👏)                                |
|   [C: ...] (不正解)                                  |
|   [D: ...] (不正解)                                  |
|                                                      |
|   解説: インターフェースは、クラスが実装すべき...    |
|                                                      |
|   [次の問題へ]                                       |
+------------------------------------------------------+
| [C] プレイヤースコアエリア (フッター)                |
|   [+][-] 0 👤田中  [+][-] 2 🤖鈴木  [+][-] 1 🦊佐藤   |
+------------------------------------------------------+
```

### [A] ヘッダーエリア (上部)

- 表示項目:

    - 現在の設定: ジャンル: Java / 難易度: ふつう

    - [設定に戻る] ボタン ([画面2] に戻る)

    - [ゲームをリセット] ボタン ([画面1] に戻る確認ダイアログ表示)

### [B] クイズエリア (中央)

- 状態: クイズの進行状況によって表示内容が変化する。

- 状態 (B-1): 出題時 (待機中)

    - ローディングスピナー

    - AIがクイズを作成中です... (最大7秒)

    - (内部的に、過去の出題と重複しないよう考慮されます)

- 状態 (B-2): 回答受付中

    - 問題文: Q. Javaでインターフェース(interface)の主な目的は何ですか？

    - 選択肢 (ボタン):

        - [A: クラスのインスタンスを生成するため]

        - [B: 関連するメソッドのシグネチャ（型）を...]

        - [C: クラスのプライベートなメンバーにアクセスするため]

        - [D: コードの実行速度を向上させるため]

    - [ヒントを見る] ボタン (押すと (B-1) と同様の待機中に)

    - （ヒント表示後）ヒント: ヒント: この仕組みを使うことで...

- 状態 (B-3): 回答・解説表示時

    - 問題文: (同上)

    - 選択肢 (状態表示):

        - [A: ...] (不正解)

        - [B: ...] (正解！ 👏)

        - [C: ...] (不正解)

        - [D: ...] (不正解)

        - (※ ユーザーが選んだ選択肢もハイライトする)

    - 正誤: 正解！ (or 不正解...)

    - 解説: 解説: インターフェースは、クラスが実装すべきメソッドの「契約」を定義します。...

    - [次の問題へ] ボタン (押すと (B-1) の待機状態へ)

### [C] プレイヤースコアエリア (下部/フッター)

- 目的: 要件定義書 (2.1 / 2.4) に基づくスコア管理

- 表示項目:

    - プレイヤー情報が横並びに表示される。（1〜16人）

    - **全員回答モード**: `[+][-] 0 👤田中` のように表示され、[+] [-] ボタンでスコアを操作できる。

    - **ターン制モード**: `0 👤田中` のようにスコアとプレイヤー情報のみ表示される。現在の回答者は強調表示される。